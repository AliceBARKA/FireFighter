' Generated by UML Generator
' Encoded: nHZRRjiszDrVGJGloXndHNTvC3AZZkCa1do3xJO3YiAWPSOXAeiQHUMohlxsyIQ952axmTBrnJ9vBZptSyZtAOEKPTkeaNx1SG8ft88mWcdQPOpYLSRG82Jn7F-DmDl67LuZ468QHgZHa5XWZhTP11cXtII9S0WP9Z7usW2WzPLpPZZy1ZuE-ZVBMNy--J3hzPVJxkAw3UQSURm1Vu0tFzzZz21_JcyVjz4RYxGxdIx7tL7V9BZ45DtYpHr35AJvwJRPR7Apx4q-Z1TjW6F6YTwzjU2zoV33QBmNvNpov_9cS25aLV3VNFXrVt1rlR0GcWN2O3nO3Bh3vULWrhTF-gKMxrBmwyzizD_5kGd5MqYVvWnka306_uXjOROsc4AAOYRMBV63OymmZBZBfWPLu65nt0Rt1A-5F38CzkCOZ3_oSmC3ajwHXtc8OcHibYfk8Ou3I3TfxiPFdtEqRquSZJYo3A2NqVT8p2Y98XuKDl6qFnjCBfQ3yN8q60u7ytvlChwOsqwZIAf_dZ56uZPGNm4WCPepbBY03TULoc0VPziLeaEuGb4Ro8_q5ynIj22RJOHoOdCbKIBuj1zZG_6w3QxuxvamU3z2M-xdZW0nl4KHZhcJ5lgVs5qHI3d5kVYS3N7ApaPaZQASiEC9aS3htocNhHklfrKjKilfY4dsmMsPaUTAWilAZa6L9Ml8aDmrcL6KS2ypeQovlK7CK3r8_yfuhFEuP5npLq5EQ63RAkLsCYDKkC1Q2tsT3TC0tL3ulCfZFuOLNIxOy8LIxmQlsPqCq1EWTgwHiANU2acKRUCUoU9yXv87SwaP2X_KR6lNb51372la7Mcr-wwAy9SH7zp3A4CMfo8nfuYct57S7yfALvHaYSpHdHSK70jQk4ePXI5JlGXqzTAi_OB5KK9IBCJWHL3_4xjRSYyZW5SBBkpcgGr6bPqy4uuyd0Ffhgd3-GGSvdkiYaD1BKndIDPC3P0hUsdd8swM9EK6McHKCi4odfjSKfbkAiLEG2mYOqKeBuqZc9mLeihSo5UTpWdWUb6UO5F2cpINUs4kZtKk5VZ20_n0H6zXY00F0gBClQlNRFTSpGGFCsa57tCjK7w4bh8Y5LhA4kFNOwwrLIYfgaNp4x1NwJn5IrVkZ3msTbL-BSWOFR8oom9NUC4KSJ6CvDo9e57zAETOziU8P4gzbZTdMXJ6Qx9jWvdyyjOOemUz28xpT6bADdK9ybh1tpmS8lzZ8YZxNQ1Rc4NCGbVcr0olPBFMyCLJWWgR-KY3EgfFd_bm8wWqGfVvJMKVr0nXR5GmKPKMn4CeIXXFPjvh-AahGY841JFzJpEIFgvbOQCB5ymJYk2QrofCrfU4-cciO1IYAkC9-XnBZ7V83d5bG84UwFPLXvp7tgN9K0HEbMKJfnDfguEwyGpaisQ6qxlzqPfA_GEHVBhLVkzWhBR1vYjshxhESoWdVSALDRLLdLfaoJ7d5cDQioUN2i2PNGouZDmIekzQhIBcPwAOji6QPAi8SUZRqtS6zKWGSlDR37ur46Oa_FBaGfCo9Cs2MXS45QzsTAczXkcTmEkeQdkm71VX9lGuL8VsnLcUXggIvYjjvbG7eMTCoWNlSbvF4acB7Welv8JI9RMehKhmgcl1TvbmSpzQnS6y-OnpVrK1sbhMRKKwegxFbHEzJexKfRsa2DNHxvy_t6kFl6Gu0qRJEs0qtHb1NL6iIQ9PdM_SG_SFFCrdpp55tHZbMUfKDn_a1vQvScPqfu7TYzhsxiLjE_MtxTtBslRkfMsxLBbgIwLrpBrSH7EOKV4UPOfVQVCzyL0ZhvPb8BnUronIgGYj1QGofmoHcvR8FfCpIVG3f3KYGXHprJzNvB5y5z0RnhF0irjiIxrEyPMEw6vf1QHsh4UK0sckdsqA0w9rNlBoH8UObiOndx4wHaqCUM3I_yhaDIGf5485iO4fX_Egr8u4po2jgSsU8iuByGNc35BPiWvsHYjCvD88aggaGnoZr97_8w8CXp3oGwz56I9yJgg1dvF7WCjalLML2q9bEX5QjM8jcV6UL1QX8YrshhiylkwR7lQGz6tdx5veysUysXdC_TV-gkUvkiQBza-jbjIvkYV79NFpzBJZpDyDt-FPwUa_7VMmumKBviwJcP-FEh0MQ8-QwYcf92gMDffwh31ap3SqNRcqwRoNTCd6nfFtJvVSbBtL4eUxIZMg2ZfcSku_KW3b2WSc35qhH8aYjNOWX4CEY5WYIfirl4DMhQvURA_IpbZWMhVIXALL73uEqXuVoIeWsSZSU8_YTRQD_WK
' URL: http://www.plantuml.com/plantuml/uml/nHZRRjiszDrVGJGloXndHNTvC3AZZkCa1do3xJO3YiAWPSOXAeiQHUMohlxsyIQ952axmTBrnJ9vBZptSyZtAOEKPTkeaNx1SG8ft88mWcdQPOpYLSRG82Jn7F-DmDl67LuZ468QHgZHa5XWZhTP11cXtII9S0WP9Z7usW2WzPLpPZZy1ZuE-ZVBMNy--J3hzPVJxkAw3UQSURm1Vu0tFzzZz21_JcyVjz4RYxGxdIx7tL7V9BZ45DtYpHr35AJvwJRPR7Apx4q-Z1TjW6F6YTwzjU2zoV33QBmNvNpov_9cS25aLV3VNFXrVt1rlR0GcWN2O3nO3Bh3vULWrhTF-gKMxrBmwyzizD_5kGd5MqYVvWnka306_uXjOROsc4AAOYRMBV63OymmZBZBfWPLu65nt0Rt1A-5F38CzkCOZ3_oSmC3ajwHXtc8OcHibYfk8Ou3I3TfxiPFdtEqRquSZJYo3A2NqVT8p2Y98XuKDl6qFnjCBfQ3yN8q60u7ytvlChwOsqwZIAf_dZ56uZPGNm4WCPepbBY03TULoc0VPziLeaEuGb4Ro8_q5ynIj22RJOHoOdCbKIBuj1zZG_6w3QxuxvamU3z2M-xdZW0nl4KHZhcJ5lgVs5qHI3d5kVYS3N7ApaPaZQASiEC9aS3htocNhHklfrKjKilfY4dsmMsPaUTAWilAZa6L9Ml8aDmrcL6KS2ypeQovlK7CK3r8_yfuhFEuP5npLq5EQ63RAkLsCYDKkC1Q2tsT3TC0tL3ulCfZFuOLNIxOy8LIxmQlsPqCq1EWTgwHiANU2acKRUCUoU9yXv87SwaP2X_KR6lNb51372la7Mcr-wwAy9SH7zp3A4CMfo8nfuYct57S7yfALvHaYSpHdHSK70jQk4ePXI5JlGXqzTAi_OB5KK9IBCJWHL3_4xjRSYyZW5SBBkpcgGr6bPqy4uuyd0Ffhgd3-GGSvdkiYaD1BKndIDPC3P0hUsdd8swM9EK6McHKCi4odfjSKfbkAiLEG2mYOqKeBuqZc9mLeihSo5UTpWdWUb6UO5F2cpINUs4kZtKk5VZ20_n0H6zXY00F0gBClQlNRFTSpGGFCsa57tCjK7w4bh8Y5LhA4kFNOwwrLIYfgaNp4x1NwJn5IrVkZ3msTbL-BSWOFR8oom9NUC4KSJ6CvDo9e57zAETOziU8P4gzbZTdMXJ6Qx9jWvdyyjOOemUz28xpT6bADdK9ybh1tpmS8lzZ8YZxNQ1Rc4NCGbVcr0olPBFMyCLJWWgR-KY3EgfFd_bm8wWqGfVvJMKVr0nXR5GmKPKMn4CeIXXFPjvh-AahGY841JFzJpEIFgvbOQCB5ymJYk2QrofCrfU4-cciO1IYAkC9-XnBZ7V83d5bG84UwFPLXvp7tgN9K0HEbMKJfnDfguEwyGpaisQ6qxlzqPfA_GEHVBhLVkzWhBR1vYjshxhESoWdVSALDRLLdLfaoJ7d5cDQioUN2i2PNGouZDmIekzQhIBcPwAOji6QPAi8SUZRqtS6zKWGSlDR37ur46Oa_FBaGfCo9Cs2MXS45QzsTAczXkcTmEkeQdkm71VX9lGuL8VsnLcUXggIvYjjvbG7eMTCoWNlSbvF4acB7Welv8JI9RMehKhmgcl1TvbmSpzQnS6y-OnpVrK1sbhMRKKwegxFbHEzJexKfRsa2DNHxvy_t6kFl6Gu0qRJEs0qtHb1NL6iIQ9PdM_SG_SFFCrdpp55tHZbMUfKDn_a1vQvScPqfu7TYzhsxiLjE_MtxTtBslRkfMsxLBbgIwLrpBrSH7EOKV4UPOfVQVCzyL0ZhvPb8BnUronIgGYj1QGofmoHcvR8FfCpIVG3f3KYGXHprJzNvB5y5z0RnhF0irjiIxrEyPMEw6vf1QHsh4UK0sckdsqA0w9rNlBoH8UObiOndx4wHaqCUM3I_yhaDIGf5485iO4fX_Egr8u4po2jgSsU8iuByGNc35BPiWvsHYjCvD88aggaGnoZr97_8w8CXp3oGwz56I9yJgg1dvF7WCjalLML2q9bEX5QjM8jcV6UL1QX8YrshhiylkwR7lQGz6tdx5veysUysXdC_TV-gkUvkiQBza-jbjIvkYV79NFpzBJZpDyDt-FPwUa_7VMmumKBviwJcP-FEh0MQ8-QwYcf92gMDffwh31ap3SqNRcqwRoNTCd6nfFtJvVSbBtL4eUxIZMg2ZfcSku_KW3b2WSc35qhH8aYjNOWX4CEY5WYIfirl4DMhQvURA_IpbZWMhVIXALL73uEqXuVoIeWsSZSU8_YTRQD_WK
' Generated on: 2025-11-28T16:25:53.218784800

@startuml
skinparam classAttributeIconSize 0
hide circle

class SimulatorApplication {
  -{static} VIEW_RESOURCE_PATH: String = "/view/view.fxml"
  -{static} APP_NAME: String = "Firefighter simulator"
  -{static} ROW_COUNT: int = 20
  -{static} COLUMN_COUNT: int = 20
  -{static} BOX_WIDTH: int = 50
  -{static} BOX_HEIGHT: int = 50
  +{static} INITIAL_FIRE_COUNT: int = 3
  +{static} INITIAL_FIREFIGHTER_COUNT: int = 6
  -primaryStage: Stage
  -view: Parent
  --
  -initializePrimaryStage(primaryStage: Stage): void
  +start(primaryStage: Stage): void
  -initializeView(): void
  -showScene(): void
  +{static} main(args: String[]): void
}

class SimulatorMain {
  +{static} main(args: String[]): void
}

class Controller {
  +{static} PERIOD_IN_MILLISECONDS: int = 50
  +restartButton: Button
  +oneStepButton: Button
  +generationNumberLabel: Label
  -pauseToggleButton: ToggleButton
  -playToggleButton: ToggleButton
  -grid: Grid<ViewElement>
  -timeline: Timeline
  -board: Board<List<ModelElement>>
  --
  -initialize(): void
  -initializePlayAndPauseToggleButtons(): void
  -setModel(firefighterBoard: FirefighterBoard): void
  -updateBoard(): void
  -repaintGrid(): void
  -getViewElement(squareState: List<ModelElement>): ViewElement
  -initializeTimeline(): void
  +play(): void
  +pause(): void
  +pauseToggleButtonAction(): void
  +playToggleButtonAction(): void
  +restartButtonAction(): void
  +initialize(squareWidth: int, squareHeight: int, columnCount: int, rowCount: int, initialFireCount: int, initialFirefighterCount: int): void
  +oneStepButtonAction(): void
  -updateGenerationLabel(value: int): void
}

class PersistentToggleGroup {
  ~PersistentToggleGroup()
}

abstract class AbstractFirefighter {
  #position: Position
  #movementStrategy: MovementStrategy
  --
  #AbstractFirefighter(startPosition: Position, movementStrategy: MovementStrategy)
  +getPosition(): Position
  +setPosition(position: Position): void
  #stepsPerTurn(): int
  +act(fire: Fire, neighbors: Map<Position,List<Position>>, terrainPolicy: TerrainPolicy): List<Position>
}

interface Actor {
  ~getPosition(): Position
  ~setPosition(position: Position): void
  ~getModelElement(): ModelElement
  ~act(fire: Fire, neighbors: Map<Position,List<Position>>, terrainPolicy: TerrainPolicy): List<Position>
}

interface Board {
  ~getState(position: Position): S
  ~setState(state: S, position: Position): void
  ~rowCount(): int
  ~columnCount(): int
  ~updateToNextGeneration(): List<Position>
  ~reset(): void
  ~stepNumber(): int
}

class Cloud {
  -position: Position
  -random: Random = new Random()
  --
  +Cloud(startPosition: Position)
  +getPosition(): Position
  +setPosition(position: Position): void
  +getModelElement(): ModelElement
  +act(fire: Fire, neighbors: Map<Position,List<Position>>, terrainPolicy: TerrainPolicy): List<Position>
}

class DefaultTerrainPolicy {
  -terrainGrid: TerrainType
  --
  +DefaultTerrainPolicy(terrainGrid: TerrainType[][])
  +terrainAt(position: Position): TerrainType
  +canFirefighterMoveTo(position: Position, motorized: boolean): boolean
  +canCloudMoveTo(position: Position): boolean
  +fireSpreadPeriodFor(position: Position): int
}

class Fire {
  -firePositions: Set<Position>
  --
  +Fire(initialPositions: Set<Position>)
  +getFirePositions(): Set<Position>
  +isOnFire(position: Position): boolean
  +extinguish(position: Position): void
  +spread(step: int, neighbors: Map<Position,List<Position>>, terrainPolicy: TerrainPolicy): List<Position>
}

class Firefighter {
  +Firefighter(startPosition: Position, movementStrategy: MovementStrategy)
  #stepsPerTurn(): int
  +getModelElement(): ModelElement
}

class FirefighterBoard {
  -columnCount: int
  -rowCount: int
  -initialFireCount: int
  -initialFirefighterCount: int
  -initialCloudCount: int = 3
  -motorizedRatio: double = 0.2
  -initialMountainCount: int = 4
  -initialRockyCount: int = 4
  -positions: Position
  -neighbors: Map<Position, List<Position>> = new HashMap<>()
  -random: Random = new Random()
  -step: int = 0
  -terrainGrid: TerrainType
  -terrainPolicy: TerrainPolicy
  -fire: Fire
  -firefighters: List<AbstractFirefighter> = new ArrayList<>()
  -clouds: List<Cloud> = new ArrayList<>()
  --
  +FirefighterBoard(columnCount: int, rowCount: int, initialFireCount: int, initialFirefighterCount: int)
  -initPositions(): void
  -initNeighbors(): void
  -initTerrain(): void
  -randomPosition(): Position
  +initializeElements(): void
  -randomFreePosition(): Position
  +getState(position: Position): List<ModelElement>
  +rowCount(): int
  +columnCount(): int
  +stepNumber(): int
  +reset(): void
  +setState(state: List<ModelElement>, position: Position): void
  +updateToNextGeneration(): List<Position>
}

class MotorizedFirefighter {
  +MotorizedFirefighter(startPosition: Position, movementStrategy: MovementStrategy)
  #stepsPerTurn(): int
  +getModelElement(): ModelElement
}

interface TerrainPolicy {
  ~terrainAt(position: Position): TerrainType
  ~canFirefighterMoveTo(position: Position, motorizes: boolean): boolean
  ~canCloudMoveTo(position: Position): boolean
  ~fireSpreadPeriodFor(position: Position): int
}

interface MovementStrategy {
  ~nextPosition(current: Position, firePositions: Collection<Position>, neighbors: Map<Position,List<Position>>, terrainPolicy: TerrainPolicy): Position
}

class TargetStrategy {
  +nextPosition(position: Position, targets: Collection<Position>, neighbors: Map<Position,List<Position>>, terrainPolicy: TerrainPolicy): Position
}

class FirefighterGrid {
  -boxWidth: int
  -boxHeight: int
  -columnCount: int
  -rowCount: int
  --
  -paintElementAtPosition(element: ViewElement, position: Position): void
  +repaint(positionedElements: List<Pair<Position,ViewElement>>): void
  -clear(positionedElements: List<Pair<Position,ViewElement>>): void
  -paint(positionedElements: List<Pair<Position,ViewElement>>): void
  +repaint(elements: ViewElement[][]): void
  -clear(): void
  -paint(elements: ViewElement[][]): void
  +columnCount(): int
  +rowCount(): int
  +setDimensions(columnCount: int, rowCount: int, boxWidth: int, boxHeight: int): void
  -paintLines(): void
  -paintVerticalLines(): void
  -paintHorizontalLines(): void
  -paintBox(row: int, column: int, color: Color): void
  -clearBox(row: int, column: int): void
}

interface Grid {
  ~repaint(elements: List<Pair<Position,E>>): void
  ~repaint(elements: E[][]): void
  ~setDimensions(columnCount: int, rowCount: int, squareWidth: int, squareHeight: int): void
  ~columnCount(): int
  ~rowCount(): int
}

Controller *-- Grid
Controller *-- Board
Controller ..> FirefighterBoard
AbstractFirefighter ..|> Actor
AbstractFirefighter *-- MovementStrategy
AbstractFirefighter ..> Fire
AbstractFirefighter ..> TerrainPolicy
Actor ..> Fire
Actor ..> TerrainPolicy
Cloud ..|> Actor
Cloud ..> Fire
Cloud ..> TerrainPolicy
DefaultTerrainPolicy ..|> TerrainPolicy
Fire ..> TerrainPolicy
Firefighter --|> AbstractFirefighter
Firefighter ..> MovementStrategy
FirefighterBoard ..|> Board
FirefighterBoard *-- TerrainPolicy
FirefighterBoard *-- Fire
FirefighterBoard o-- AbstractFirefighter
FirefighterBoard o-- Cloud
MotorizedFirefighter --|> AbstractFirefighter
MotorizedFirefighter ..> MovementStrategy
MovementStrategy ..> TerrainPolicy
TargetStrategy ..|> MovementStrategy
TargetStrategy ..> TerrainPolicy
FirefighterGrid ..|> Grid
@enduml